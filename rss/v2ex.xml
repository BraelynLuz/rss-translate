<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>V2EX</title><link>https://www.v2ex.com/</link><description>way to explore</description><lastBuildDate>Sat, 28 Oct 2023 02:51:49 GMT</lastBuildDate><generator>rfeed v1.1.1</generator><docs>https://github.com/svpino/rfeed/blob/master/README.md</docs><item><title>[问与答] joplin_server 这个镜像如何更新版本呢</title><link>https://www.v2ex.com/t/986203#reply0</link><description>&lt;p&gt;我删除了容器、镜像，然后无论是拉去最新版本还是按照最新版本的版本号拉取，他都是老版本。只有我删除了数据包，他才会是个新的。但是我数据就都没了。请问大佬们是怎么更新的呢？&lt;/p&gt;</description><pubDate>Sat, 28 Oct 2023 02:49:47 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986203#reply0</guid></item><item><title>[问与答] 结婚几年，已经没有感情了，有没有年龄大一点的过来人聊聊怎么熬下去的。</title><link>https://www.v2ex.com/t/986200#reply7</link><description>结婚 5 年，当初年少不懂事，没怎么谈过恋爱，一年后结婚的。其实在那一年前面几个月很甜蜜，但是后面经常吵架，一个星期都能吵一次，一吵架半夜不能睡觉。&lt;br /&gt;&lt;br /&gt;后面怀了孩子，还是吵架，一言不合就要自杀跳楼，我怕真的出事，内心也是喜欢的，就结婚了。&lt;br /&gt;&lt;br /&gt;现在第五个年头，两个人的爱好，饮食习惯，生活方式其实一直都差距很大。&lt;br /&gt;&lt;br /&gt;平常下完班，近 8 点到家，我吃饭洗碗，她在边上玩三国杀，娃有时自己在玩，有时在看宝宝巴士。&lt;br /&gt;吃完饭洗完碗有时扫一下地，然后给娃洗澡，9 点多。&lt;br /&gt;&lt;br /&gt;等娃睡了 2 个人也没太多的交流了，她玩三国杀刷抖音，我有时玩会游戏，有事看会视频，她玩游戏会一直喊我做事，隔几分钟倒水，隔几分钟拿个纸巾，隔几分钟洗点水果之类的，我有时在和朋友开黑，有时很烦，有时说你自己拿一下，她就发飙了。&lt;br /&gt;&lt;br /&gt;平常家里有什么事情，她提出来，我稍微一提不同的意见，她就炸了，说我什么都不懂，还来反对，巴拉巴拉能说很久。&lt;br /&gt;&lt;br /&gt;还有现在差不多是无性婚姻了，好好跟她聊这个事情，她就开始一哭二闹，说她这么累了，还要满足我的兽欲。&lt;br /&gt;&lt;br /&gt;现在娃白天上幼儿园，下午阿姨 5 点多来做饭搞卫生，她也没上班，中午她点外卖，也没做什么家务。&lt;br /&gt;&lt;br /&gt;事业遥遥无期，家庭不顺，离婚又担心小孩的成长。&lt;br /&gt;每天情绪低落，啥都不想做，回到家话也不想说，说话又怕吵架。现在感觉对所有的事情都失去了兴趣，游戏也不想玩了，看剧也没什么意思，旅游也不想去。&lt;br /&gt;&lt;br /&gt;以后 70 岁才退休，但是最近的新闻，这么有权，这&lt;br /&gt;么厉害的医生没到 70 就没了。也不知道生活有什么意义，阶级已经定好，靠上班基本不能改变。&lt;br /&gt;&lt;br /&gt;有没有过来人，我这是不是抑郁症前期？&lt;br /&gt;&lt;br /&gt;有没有过来人，这种婚姻该怎么继续下去？&lt;br /&gt;&lt;br /&gt;如果可以重开，我再也不会结婚买房生小孩了。</description><pubDate>Sat, 28 Oct 2023 02:39:41 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986200#reply7</guid></item><item><title>[Android] 双十一买手机求购推荐&amp;大家分享自己使用体验</title><link>https://www.v2ex.com/t/986198#reply1</link><description>&lt;p&gt;双十一想买个手机，按优先级需求是这样的&lt;/p&gt;
&lt;p&gt;1.系统流畅稳定,不杀后台&lt;/p&gt;
&lt;p&gt;2.续航
之前用的苹果 XS 和 12 ，让我觉得续航还是很重要&lt;/p&gt;
&lt;p&gt;3.拍照&lt;/p&gt;
&lt;p&gt;另外自己不打游戏，预算没要求&lt;/p&gt;
&lt;p&gt;目前看的有&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一加 ace2pro  处理器好&lt;/li&gt;
&lt;li&gt;荣耀 X50      续航长&lt;/li&gt;
&lt;li&gt;红米 12turbo  看 V 站大家评价都不错&lt;/li&gt;
&lt;li&gt;等等华为发布 nova12&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;各位老哥有其他推荐的不，或者分享下自己最新买的手机使用体验&lt;/p&gt;</description><pubDate>Sat, 28 Oct 2023 02:34:00 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986198#reply1</guid></item><item><title>[问与答] 如何通过代理游戏赚钱</title><link>https://www.v2ex.com/t/986196#reply1</link><description>比如代理哪些浮夸的游戏</description><pubDate>Sat, 28 Oct 2023 02:18:08 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986196#reply1</guid></item><item><title>[程序员] 从最近发的一个工单来吐槽一下群晖的技术支持和 DSM Raid</title><link>https://www.v2ex.com/t/986195#reply7</link><description>&lt;p&gt;以下内容纯主观吐槽，各位看个乐即可，也给双 11 准备买群晖的朋友提供一点 FS 方面的参考。&lt;/p&gt;
&lt;p&gt;事情起因是，我把自用的存储从 zfs/ext4 迁移到了 btrfs: Gen10 从 zfs 迁到了 btrfs raid10 ，白群晖从 ext4 切到了 btrfs 。&lt;/p&gt;
&lt;p&gt;然后我就开始读 btrfs 的文档。(btrfs 和 zfs 的区别还挺大，这点等我下次摸鱼的时候再开帖子唠&lt;/p&gt;
&lt;p&gt;我要吐槽的是:&lt;/p&gt;
&lt;p&gt;a. 群晖在销售页面关于 btrfs 如何保护用户数据吹得有点过。zfs/btrfs 实现 self-healing 功能的前提是，数据有热冗余，单凭 checksum 只能检测出 data corruption 但无法修复。而群晖的销售给用户的印象是，他们有黑科技能恢复损坏的数据，但实际上他们只是尽量让 mdadm 和 btrfs 不出问题，至于用户的数据，坏了就坏了，修不了&lt;/p&gt;
&lt;p&gt;b. 群晖的技术支持的客服，不知道是水平不行，还是警惕心太强，回复不但笼统，而且敷衍，甚至有时是错的。这个工单中，可能认为我是他们竞争对手的人，来套他们的方案...... 但我只是想知道他们如何保护我的数据。以上情况也不是第一次出现在我提的工单里了&lt;/p&gt;
&lt;p&gt;下面贴一下工单对话，主题是 "关于存储池'数据清理'功能可以修复 checksum 异常的数据的疑惑":&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;看了一下我的设备所使用的存储空间的结构，先用 mdadm 创建 raid1 ，再将映射为 md2 的设备作为 pv 交由 lvm 管理，lvm 在 pv 上创建 vg ，进而创建 lv ，最后把 btrfs 放在 lv 上。

据我所知，btrfs 会记录每个 extent 的 checksum 值用于验证这个 extent 中的数据是否完整。而修复 checksum 有异常的数据需要额外的，具有正常的 checksum 的另一份数据。

比如在 Linux 上 btrfs 默认存储两份 metadata 用于在 metadata 损坏时修复这些损坏的 metadata ，而 data 则只存了一份，所以在这种情况下，如果 data 的 checksum 出现异常则无法修复。

而群晖 btrfs 文件系统中也使用了一样的配置，即，2 份 metadata 和 1 份 data 。所以我的理解是数据清理这个功能只能修复 btrfs 中的 metadata ，而不能修复 data 。是这样的吗？

如果不是的话，数据清理的行为和结果是什么样的？
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;您对于数据清理中 FS scrubbing 这个部分理解没有问题，但是执行数据清理这个操作会包含两个操作，FS scrubbing 和 RAID scrubbing 。

理论上如果 Btrfs 不开 COW 的话其实并不会知道某个 data 有损坏，只有读到这个文件才会知道文件损坏了。

而当文件系统在进行 FS scrubbing 的时候如果查到某个文档 data 真的坏了，那就会去做 RAID scrubbing 然后用 RAID parity 来修修看（不管有没有开 COW ）。
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;数据清理如果包含 btrfs scrub &amp;amp; mdadm scrub 两个操作的话，它们的执行逻辑是怎样的？
先 btrfs scrub ，再 mdadm scrub ，这两个步骤一定会按这样的顺序发生？
或者像你说的那样，btrfs scrub 遇到 data checksum 不一致时才发生 mdadm scrub ？

我注意到，对于 mdadm scrub 来说:
1. mdadm raid5/6 在遇到数据不一致时会假定 checksum 错误，然后根据(尽管可能已经损坏的)已有数据重新计算 checksum
2. mdadm raid1 遇到数据不一致时会假定第一个硬盘的数据是正确的，然后覆写到其他的硬盘中
如果发生 data checksum 不一致的情况，那么 mdadm scrub 为什么可以修复 btrfs 中的数据？

按照我的理解来看，mdadm scrub 所更新的数据只是用于构成 mdadm 的数据。mdadm 暴露给 btrfs 的，btrfs 可以看到的数据并没有变化，所以我认为 mdadm scrub 无法修复 btrfs 中 data checksum 不一致的问题。这个推断的过程哪里有问题？
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;抱歉让您久等了，目前这边有与相关工程师讨论，回复如下：

目前 DSM 在执行数据清理的时候是会先执行 FS scrubbing 再执行 RAID scrubbing ，但由于您当前的许多问题涉及到 Btrfs 的底层原理及行为，由于 Btrfs 是 Oracle 所研发，因此对于此文件系统的具体原理与技术规范的准确解释，我们建议您可以直接查阅或咨询 oracle 官方。

参考： https://docs.oracle.com/en/operating-systems/oracle-linux/8/fsadmin/fsadmin-ManagingtheBtrfsFileSystem.html#btrfs-setup
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;我不关心 btrfs 的技术细节，我想问的是 DSM 如何保证数据被修复，或者向用户报告数据无法被修复。

btrfs 存储 2 份 metadata 和 1 份 data ，那么 data 损坏时，DSM 所用的 raid(mdadm)又不能保证 data 可以被修复。那么，在这种情况下，一旦数据无法被修复，DSM 会向用户报告拥有这部分 data 的文件损坏，需要用户手动介入？
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;首先，DSM 本身、Btrfs 文件系统又或是带有冗余功能的 RAID ，都不能完全保证在原始数据错误的情况下数据的完整性。

一般情况下如果数据在文件系统中出现错误，则大概率就已经发生文件系统错误，而文件系统检查都是以修好文件系统本身的结构为主，损坏的文件本身很有可能还是坏的。

因此若您的数据十分重要，Synology 始终建议您备份多个数据副本到不同的地方，以保证数据安全。

参考：如何备份 Synology NAS
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;关于这句 "首先，DSM 本身、Btrfs 文件系统又或是带有冗余功能的 RAID ，都不能完全保证在原始数据错误的情况下数据的完整性。" 本身就不对。&lt;/p&gt;
&lt;p&gt;对于 Btrfs raid1/10 以及不稳定的 btrfs raid5/6 ，又或者是 zfs mirror/raidz 这种有 self-healing 的 fs 来说，在一份 data 损坏的情况下都可以根据 fs 内部的热冗余或 raid 中的奇偶校验码来修复损坏的那份数据。只有当 data 损坏且没有热冗余的情况下 fs 才会报告 data corruption 需要用户介入。&lt;/p&gt;
&lt;p&gt;(注意，目前只有 btrfs/zfs 有 self-healing 。mdadm 没有，硬件 raid 也没有。&lt;/p&gt;
&lt;p&gt;威联通用的是纯 zfs ，使用 mirror/raidz 的情况下可以触发 self-healing 修复 corrupted data ；或者像我一样自建存储，使用 btrfs raid10 也能让 self-healing 生效。&lt;/p&gt;
&lt;p&gt;总之，准备购买群晖的朋友要注意，就我目前阅读的结论来看，群晖，不论采用什么方案都无法保证数据完整性，他们只能尽量保证 DSM 的运行不出问题；就我发了六七个工单的体验来看，对于知识不够丰富的个人用户来说，群晖的技术支持约等于 0 ，对于有服务器运维经验的用户来说，客服的回复多数时候有误导性。&lt;/p&gt;</description><pubDate>Sat, 28 Oct 2023 02:12:56 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986195#reply7</guid></item><item><title>[青岛] 青岛的互联网寒冬也太冷了</title><link>https://www.v2ex.com/t/986194#reply3</link><description>&lt;p&gt;工作马上 10 年了，公司在裁员，好慌。大龄程序猿们都有好的副业吗？&lt;/p&gt;</description><pubDate>Sat, 28 Oct 2023 01:58:03 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986194#reply3</guid></item><item><title>[生活] 求推荐舒服的被套</title><link>https://www.v2ex.com/t/986192#reply7</link><description>&lt;p&gt;有没有舒服的被套推荐，之前我妈实体店(已倒闭)买的，已经破了只能扔，现在网上买的都不舒服，导致睡眠质量下降，偶尔还失眠。我个人夏天喜欢抱着被子睡，被套不够柔软就整个身子都不舒服&lt;br /&gt;
各位有睡得舒服的被套推荐一下吗？&lt;/p&gt;</description><pubDate>Sat, 28 Oct 2023 01:55:43 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986192#reply7</guid></item><item><title>[iOS] 创建提醒事项自动归类，如何关闭归类！</title><link>https://www.v2ex.com/t/986191#reply4</link><description>更新 iOS17 后误操作给开启了提醒事项的自动分类，日常使用 Siri 创建了提醒事项后，不是归到“蛋类”就是“面包麦片”等之类的，并且跟创建的提醒内容八杆子打不着！&lt;br /&gt;这个提醒事项自动归类在哪里能关闭呀🙏</description><pubDate>Sat, 28 Oct 2023 01:49:25 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986191#reply4</guid></item><item><title>[宽带症候群] 怎么设置 ipv6 mtu</title><link>https://www.v2ex.com/t/986190#reply0</link><description>&lt;p&gt;tplink 、h3c 和（我用的） openwrt 都没有 ipv6 MTU 的选项，只有一个 WAN 口的 MTU ，那是 v4 和 v6 公用一个 MTU 值吗？&lt;/p&gt;</description><pubDate>Sat, 28 Oct 2023 01:45:00 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986190#reply0</guid></item><item><title>[问与答] 站在 2023 年末的节点来看，开发游戏使用游戏引擎，在国内，用 godot 还是用 Cocos？</title><link>https://www.v2ex.com/t/986188#reply4</link><description>&lt;p&gt;主要考虑生态。另外不能被游戏引擎提供商打工。&lt;/p&gt;</description><pubDate>Sat, 28 Oct 2023 01:38:07 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986188#reply4</guid></item><item><title>[问与答] 要请一个月假怎么请家人们</title><link>https://www.v2ex.com/t/986187#reply9</link><description>&lt;p&gt;有事情要请一个月假，但真实的原因不好说，有什么理由好请一个月假&lt;/p&gt;</description><pubDate>Sat, 28 Oct 2023 01:36:55 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986187#reply9</guid></item><item><title>[分享发现] 翻译笔实在太好用</title><link>https://www.v2ex.com/t/986186#reply3</link><description>&lt;p&gt;给小孩买了个翻译笔（最便宜、最高性价比的那款“蛋”，价格 300 以下），个人觉得超级好用。&lt;/p&gt;
&lt;p&gt;读书时很羡慕别人有“文曲星”、“快易通”之类的电子词典。但是用过翻译笔，被爽到了，感觉秒杀这些电子词典。&lt;/p&gt;
&lt;p&gt;总结一下其特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;扫描输入。翻译笔基本都带这个功能，看纸质书超级方便。但试过扫屏幕，基本不行。所以非常适合学生党。相比电子词典需要手输入，超级快捷。&lt;/li&gt;
&lt;li&gt;内置字典。轻便，起码书包不用背着厚重的字典了。我买的这款只有英语和汉语字典，感觉应付小学、初中、高中都没问题。贵一倍的那些，支持其它语种。值得一提的是，汉语字典提供了笔画顺序的动画。&lt;/li&gt;
&lt;li&gt;语音输入查字典。这个降低了电子词典的打字输入的麻烦。语音输入还提供很多功能。但是可能需要联网。&lt;/li&gt;
&lt;li&gt;朗读练习。可以评价朗读发音是否准确。对比以前只能自己对比录音，实在好太多。&lt;/li&gt;
&lt;li&gt;省电。我买的这款，能够自动待机，即扫即显示，无需关机。&lt;/li&gt;
&lt;li&gt;内置古诗。背古诗可以不用带课本，还有完整解析。&lt;/li&gt;
&lt;li&gt;适合不能带手机的场合。&lt;/li&gt;
&lt;/ul&gt;</description><pubDate>Sat, 28 Oct 2023 01:28:51 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986186#reply3</guid></item><item><title>[问与答] 请问有了解 mercari 煤炉的站友吗？给这个网站搞得头大</title><link>https://www.v2ex.com/t/986185#reply4</link><description>听说 mercari 流量大，玩法也花，于是就抱着试试看的想法，环境方面是 ok 了，机场，代理 ip ，指纹浏览器，全都按部就班，结果配置了五个环境，每次都是刚注册成功，一刷新页面，就显示账号被限制，各种办法都试过，所有信息手动输入，用 google 邮箱，将 gv 手机号替换成 mg 真实手机号，全都不行，实在头疼，请问有没有懂得大佬解惑（环境方面我确信真的没问题）</description><pubDate>Sat, 28 Oct 2023 01:27:25 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986185#reply4</guid></item><item><title>[OpenWrt] Openwrt/ Linux 定长 日志文件</title><link>https://www.v2ex.com/t/986183#reply1</link><description>&lt;p&gt;有这么一个需求：一个进程会源源不断输出日志（不支持修改日志级别），现在把这个进程写进了 Openwrt 的 Service 的 procd 进行管理，有什么方案可以做到：可以查看进程输出的日志，但是日志长度不会无限制增长。（最好是不使用 cron 任务定时去截断日志文件这个方案）。&lt;/p&gt;
&lt;p&gt;倒是想到了一个方式，创建一个 unix socket 文件，然后让进程把日志输出到 socket 文件中，想要查看的时候，直接怼在 socket 文件上读。而且 socket 文件好像可以设置长度。但是不知为何，Openwrt x86 上无法创建成功 socket 。（如果有大神有相关经验，望可指点一下。）&lt;/p&gt;
&lt;p&gt;希望各位大神不吝赐教。&lt;/p&gt;</description><pubDate>Sat, 28 Oct 2023 00:55:43 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986183#reply1</guid></item><item><title>[机械键盘] HHKB 用了 10 年，手感变差怎么办？</title><link>https://www.v2ex.com/t/986182#reply16</link><description></description><pubDate>Sat, 28 Oct 2023 00:53:16 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986182#reply16</guid></item><item><title>[API] 各位大佬们，有谁知道哪个网站可以查航班和火车的 API？</title><link>https://www.v2ex.com/t/986181#reply1</link><description>&lt;p&gt;找了一圈没找到适合个人开发者的。。   &lt;/p&gt;
&lt;p&gt;各位大佬们，要是有知道提供 API 网站的麻烦告知一下小弟，付费和免费的都行，谢谢大佬们了。。。&lt;/p&gt;</description><pubDate>Sat, 28 Oct 2023 00:29:04 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986181#reply1</guid></item><item><title>[Next.js] 使用 server components 的前提下完全使用 url params 作为状态管理是否可行</title><link>https://www.v2ex.com/t/986180#reply0</link><description>&lt;p&gt;由于 server components 的渲染早于 client components ，而且无法访问 context ，所以需要在两者之间共享 state 尤其是将客户端的变更反映到服务器端组件的时候，我现在想到的方法就是修改 url query params 然后跳转到这个新 url 。
网上也有一些提倡这样做的文章和视频，比如：
&lt;a href="https://youtu.be/ukpgxEemXsk?si=Dd9vJVfA4HBU0do3" rel="nofollow"&gt;https://youtu.be/ukpgxEemXsk?si=Dd9vJVfA4HBU0do3&lt;/a&gt;
&lt;a href="https://dev.to/jeffsalive/solving-the-challenge-of-state-persistence-in-nextjs-effortless-state-management-with-query-parameters-4a6p" rel="nofollow"&gt;https://dev.to/jeffsalive/solving-the-challenge-of-state-persistence-in-nextjs-effortless-state-management-with-query-parameters-4a6p&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;感觉大体上这种做法是可行的，但我如果客户端的状态比较复杂的话会不会带来问题？&lt;/p&gt;</description><pubDate>Sat, 28 Oct 2023 00:27:35 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986180#reply0</guid></item><item><title>[小米] 小米 14pro 相比 13u 的拍照有提升吗？</title><link>https://www.v2ex.com/t/986179#reply2</link><description>纠结这两个哪个拍照好看，看中拍照的话应该选哪个？后面会不会出 14u</description><pubDate>Sat, 28 Oct 2023 00:01:31 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986179#reply2</guid></item><item><title>[NAS] 黑群晖的哪个版本支持 heic 格式以及视频预览？</title><link>https://www.v2ex.com/t/986178#reply5</link><description>&lt;p&gt;今天 PVE all in boom 屁了，打算搞个黑群晖或者 trunas scale, 黑群晖为主，想请教下黑群晖的哪个版本支持 heic 格式以及视频预览？&lt;/p&gt;</description><pubDate>Fri, 27 Oct 2023 23:28:38 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986178#reply5</guid></item><item><title>[Linux] Linux UEFI 启动模式做软 raid1 问题</title><link>https://www.v2ex.com/t/986177#reply7</link><description>&lt;p&gt;正常的 EFI 分区无法放到 raid 上，与是打算使用手动把 sda 上的 boot 分区克隆到 sdb 上(安装系统时在 2 个盘上都建了一个 1G 的 EFI 分区)。&lt;/p&gt;
&lt;h2&gt;show efiboot order&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;efibootmgr -v&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;Update grub and install grub&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;/usr/sbin/update-grub /usr/sbin/grub-install --recheck&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;boothdd=`df -h |  grep efi |  awk  '{print $1}'  |  sed  's/://g'  |  sed  's/\/dev\///g'&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/usr/sbin/grub-install --recheck --bootloader-id debian-${boothdd%?}&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;copy EFI Partition to all disk from boot disk&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;dd  if=`df -h |  grep efi |  awk  '{print $1}'`  of=/dev/sdb1 bs=1M&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;efibootmgr --create --disk /dev/sdb --part 1 -w --label debian-sdb --loader "\EFI\debian\grubx64.efi"&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;测试 2 个盘启动都没问题，打算写个自动克隆脚本，在更新内核时触执行克隆，有人这样搞过吗？有没有啥坑。
查看 2 个盘的 /boot/efi 分区 UUID 是一样的，这样启动时似乎是随机读一个其中一个盘。&lt;/p&gt;</description><pubDate>Fri, 27 Oct 2023 23:27:58 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/986177#reply7</guid></item></channel></rss>