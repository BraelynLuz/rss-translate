<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>V2EX</title><link>https://www.v2ex.com/</link><description>way to explore</description><lastBuildDate>Thu, 23 Nov 2023 16:30:53 GMT</lastBuildDate><generator>rfeed v1.1.1</generator><docs>https://github.com/svpino/rfeed/blob/master/README.md</docs><item><title>[OpenWrt] OpenWrt 的透明网关应该怎么配置？</title><link>https://www.v2ex.com/t/994678#reply0</link><description>&lt;p&gt;最近更新网络设备，从 RouterOS 换到了 OpenWrt ，之前使用透明网关的方式扶墙，使用 Ospf 通告了 fake-ip 和一些 tg 的 ip ，为了方便想复用之前的方式，所以在 OpenWrt 上复用这个方式。
在 OpenWrt 上安装 bird2 ，配置如下:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;log syslog all;

router id 172.16.1.1;

protocol device {
    scan time 60;
}

protocol kernel {
    ipv4 {
        export all;
    };
}

protocol ospf v2 {
    ipv4 {
        import where net !~ 172.16.1.0/24;
    };

    area 0 {
        interface "br-lan" {};
    };
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;OpenWrt 路由如下&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;default via xxx.xxx.xxx.xxx dev pppoe-wan proto static
91.105.192.0/23 via 172.16.1.5 dev br-lan proto bird metric 32
91.108.4.0/22 via 172.16.1.5 dev br-lan proto bird metric 32
91.108.8.0/22 via 172.16.1.5 dev br-lan proto bird metric 32
91.108.12.0/22 via 172.16.1.5 dev br-lan proto bird metric 32
91.108.16.0/22 via 172.16.1.5 dev br-lan proto bird metric 32
91.108.20.0/22 via 172.16.1.5 dev br-lan proto bird metric 32
91.108.56.0/22 via 172.16.1.5 dev br-lan proto bird metric 32
xxx.xxx.xxx.xxx dev pppoe-wan proto kernel scope link src xxx.xxx.xxx.xxx
149.154.160.0/20 via 172.16.1.5 dev br-lan proto bird metric 32
172.16.1.0/24 dev br-lan proto kernel scope link src 172.16.1.1
185.76.151.0/24 via 172.16.1.5 dev br-lan proto bird metric 32
192.168.0.0/24 dev VLAN_666 proto static scope link metric 100
192.168.10.0/24 dev VLAN_666 proto static scope link metric 99
198.18.0.0/16 via 172.16.1.5 dev br-lan proto bird metric 32
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;但为什么 LAN 上设备还是无法访问外网呢？各位大佬帮忙看下？或者有什么更简单的配置透明网关的方式。&lt;/p&gt;</description><pubDate>Thu, 23 Nov 2023 16:30:43 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994678#reply0</guid></item><item><title>[问与答] 为什么 Bing AI 画图，一直要画方形的？</title><link>https://www.v2ex.com/t/994677#reply0</link><description>&lt;p&gt;说好几次画横幅，不行&lt;/p&gt;
&lt;p&gt;再指定说分辨率 1400*300 的，还是不行&lt;/p&gt;
&lt;p&gt;非要画方形图 1024*1024 的&lt;/p&gt;
&lt;p&gt;是有什么毛病？&lt;/p&gt;</description><pubDate>Thu, 23 Nov 2023 16:21:40 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994677#reply0</guid></item><item><title>[问与答] 2023 年你买到过哪些物美价廉值得分享的产品?</title><link>https://www.v2ex.com/t/994676#reply0</link><description>欢迎上链接</description><pubDate>Thu, 23 Nov 2023 16:14:40 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994676#reply0</guid></item><item><title>[iPhone] 有必要再单独注册一个 appleid 隔离么，为什么</title><link>https://www.v2ex.com/t/994675#reply0</link><description>处于安全和隐私考虑，打算再整部苹果装海外 APP ，是否有必要再注册一个 appleid ，与此前的 appleid 隔离 ，之前的 appleid 购买了很多海外 app ，不想再买一份。&lt;br /&gt;&lt;br /&gt;appleid 隔离与不隔离，在安全与隐私上有什么差别？</description><pubDate>Thu, 23 Nov 2023 16:00:17 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994675#reply0</guid></item><item><title>[酷工作] 深圳 B 轮出海产品：技术总监（ Java ）， 5 年以上工作经验，海外云服务架构背景，带过小团队， 60-80W</title><link>https://www.v2ex.com/t/994673#reply0</link><description>深圳 B 轮出海产品：技术总监，7 年左右工作经验，带过小团队，60-80W&lt;br /&gt;&lt;br /&gt;学历：211/985 计算机&lt;br /&gt;做过出海产品，&lt;br /&gt;带工程团队（前端+后端）&lt;br /&gt;做过出海项目（软件部署 AWS 上，2000qps ）&lt;br /&gt;创业公司背景&lt;br /&gt;&lt;br /&gt;任职要求：&lt;br /&gt;1 、5 年及以上工作经验，本科及以上学历，计算机、通信等相关专业；&lt;br /&gt;2 、有从 0 到 1 搭建过超 10 万用户的后端整体架构的经验&lt;br /&gt;3 、拥有海外云服务架构经验，JAVA 基础扎实，熟悉 JVM,网络,多线程等基础技能，熟悉分布式缓存、消息等各类常用中间件；&lt;br /&gt;4 、熟悉常见的数据结构，熟悉常用的设计模式，熟悉 SOA 、RESTful 等概念； &lt;br /&gt;5 、熟悉缓存技术，网站优化，服务器优化，集群技术处理、系统性能调优等软件编程高级技术；&lt;br /&gt;6 、较为丰富的前端对接沟通经验，了解 h5 、js 、react native 等前端开发； &lt;br /&gt;7 、扎实的技术基础，熟悉性能、可用性、伸缩性、扩展性、安全性等开发和设计方案，熟悉行业常见的架构方案；&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;微信：18621580540</description><pubDate>Thu, 23 Nov 2023 15:38:46 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994673#reply0</guid></item><item><title>[程序员] 分享一个用了 3 年的小脚本用于自动申请和分发 ssl 证书到多客户端,虽然简单但是很有用</title><link>https://www.v2ex.com/t/994672#reply0</link><description>&lt;p&gt;3 年前因为域名有点多不方便管理临时写的,用着一直很方便因此分享一下,因为貌似有些朋友也有这个需求 &lt;/p&gt;
&lt;p&gt;基于 acme 实现自动更新泛域名证书并分发(有点标题党,其实是自己拉)到各个客户端&lt;/p&gt;
&lt;p&gt;特点: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;shell 实现 无需配置环境  &lt;/li&gt;
&lt;li&gt;5 分钟简单部署,对环境和业务无侵入性  &lt;/li&gt;
&lt;li&gt;客户端一键拉取并更新证书,也可以防爆破&lt;/li&gt;
&lt;li&gt;不花钱...&lt;/li&gt;
&lt;li&gt;暂时还没想到&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href="https://github.com/del-xiong/auto-ssl-renew" rel="nofollow"&gt;https://github.com/del-xiong/auto-ssl-renew&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;中国镜像&lt;br /&gt;
&lt;a href="https://gitee.com/splot/auto-ssl-renew" rel="nofollow"&gt;https://gitee.com/splot/auto-ssl-renew&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;由于本人都是申请的泛域名证书所以只考虑了泛域名证书,单域名也是可以的,不过需要修改下脚本&lt;/p&gt;</description><pubDate>Thu, 23 Nov 2023 15:36:11 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994672#reply0</guid></item><item><title>[程序员] [记录]-在厦门的这几天</title><link>https://www.v2ex.com/t/994671#reply0</link><description>&lt;p&gt;三年前其实就打算来厦门这边发展 只可惜一直没有机会 最后选择了在上海那边发展	
但是目前入职的这家公司是出了名的拖欠工资在厦门本地 好在是有员工宿舍	
不过来厦门的这几天确实发现本地的气候比老家好很多而且吃的东西很符合我的胃口 比较清淡而且健康些	
刚好今天有个老家那边的面试 最后直接给了 10K 10K 这个薪资标准算是我在上海拿到的最高的薪资水平 但是在我老家(临近北京沿海的二线城市)来讲 算是比较不错的收入了 想了想还是回去吧&lt;/p&gt;
&lt;p&gt;在公司玩 SMT 3 Nocturne
&lt;img alt="微信图片_20231123232550.jpg" class="embedded_image" rel="noreferrer" src="https://s2.loli.net/2023/11/23/3L1ei4tE5DJgYwF.jpg" /&gt;
&lt;img alt="微信图片_20231123232555.jpg" class="embedded_image" rel="noreferrer" src="https://s2.loli.net/2023/11/23/s5EiTxkgLmRaCoB.jpg" /&gt;
&lt;img alt="微信图片_20231123232535.jpg" class="embedded_image" rel="noreferrer" src="https://s2.loli.net/2023/11/23/BkaurchVQA8ptR7.jpg" /&gt;
&lt;img alt="微信图片_20231123232559.jpg" class="embedded_image" rel="noreferrer" src="https://s2.loli.net/2023/11/23/xKG3alFEy2hSu1t.jpg" /&gt;&lt;/p&gt;</description><pubDate>Thu, 23 Nov 2023 15:32:30 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994671#reply0</guid></item><item><title>[OpenAI] GPT4 plus 找三个车友 使用开源隔离面板</title><link>https://www.v2ex.com/t/994669#reply2</link><description>&lt;p&gt;iOS 美区内购续费，个人账号稳定使用
目前已有两人，开五人车
面板隔离隐私有保证
面板：&lt;a href="https://github.com/moeakwak/chatgpt-web-share" rel="nofollow"&gt;chatgpt-web-share&lt;/a&gt;
35 元/月
可使用附件功能，如下图
&lt;img alt="截屏 2023-11-23 21.53.18" class="embedded_image" rel="noreferrer" src="https://picdl.sunbangyan.cn/2023/11/23/17fb7eeb6ff5b524efd358130fec50fa.jpeg" /&gt;
翻车按剩余时间比例退款
需要的联系&lt;a href="https://t.me/milkman155_bot" rel="nofollow"&gt;TG&lt;/a&gt;&lt;/p&gt;</description><pubDate>Thu, 23 Nov 2023 15:17:23 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994669#reply2</guid></item><item><title>[求职] [远程/兼职/外包] 7 年 PHP 工作，寻求长期合作</title><link>https://www.v2ex.com/t/994668#reply0</link><description>&lt;p&gt;手上的单差不多要完结了，在此寻求远程和其他合作机会。&lt;/p&gt;
&lt;h4&gt;技术栈&lt;/h4&gt;
&lt;p&gt;精通 PHP 开发，熟悉 Laravel 、Yii 、Hyperf 、WordPress 等开源框架，有高并发场景性能优化经验
熟悉 MySQL 、Redis 、等常用的数据库，有调优经验
熟悉 Golang 开发，有 Gin 、Beego 等框架的开发经验&lt;/p&gt;
&lt;h4&gt;联系方式&lt;/h4&gt;
&lt;p&gt;Wx:bzE0MDQ0NQ==
个人网站： &lt;a href="http://blog.yxbihq.com/" rel="nofollow"&gt;http://blog.yxbihq.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最后感谢 V 站&lt;/p&gt;</description><pubDate>Thu, 23 Nov 2023 15:15:02 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994668#reply0</guid></item><item><title>[程序员] 24 年毕业生，双非二本， CS，杭州。求指点一条学习之路</title><link>https://www.v2ex.com/t/994667#reply1</link><description>下述内容可能含有强迫症因素&lt;br /&gt;&lt;br /&gt;其实我是物联网工程，理想是计算机科学与技术，所以我自学计算机&lt;br /&gt;专科时期是计算机应用技术，收获博客一枚(Hexo+butterfly)，了解 HTML 、CSS 、计网，其余不认可&lt;br /&gt;平常对手机、电脑等数码产品有兴趣，会轻微折腾&lt;br /&gt;&lt;br /&gt;本科时期同样不认可自己有学什么&lt;br /&gt;但实际上 C(C 程序设计语言学到第三章弃)、C++（ C++ Primer 学到第三章弃）、Java 等编程语言，C 数据结构、操作系统、计算机网络等自学或学校教过，Linux ，Git ，阿里云(对象存储、函数计算、云服务器等云产品）都了解使用过&lt;br /&gt;&lt;br /&gt;目前认真学习了，Python(菜鸟教程)，Python 数据结构(网易云课堂)，Flask( &lt;a href="https://tutorial.helloflask.com/" rel="nofollow noopener" target="_blank"&gt;https://tutorial.helloflask.com/&lt;/a&gt;)&lt;br /&gt;学习 Flask 的途中跟做了教程的项目&lt;br /&gt;自己也准备着手开发一个项目，是一个文件分享网站，类似文叔叔、轻松传、空投&lt;br /&gt;技术栈：前端(Vue3/原生)，后端(Flask ，部署到阿里云函数计算)，存储(阿里云对象存储)，数据库(SQLite ，部署到阿里云文件存储)&lt;br /&gt;目前进度：学习技术栈中，已写好功能思维导图(可能会另开一贴讨论)&lt;br /&gt;&lt;br /&gt;我感觉我现在就是纯菜，我接下来该怎么学习&lt;br /&gt;&lt;br /&gt;我在逛论坛或是刷视频时，少量直接提到框架，例如 Python Flask 、Golang xx ，大部分是未见过的名词，我想那些也许是学习方向吧，还是说我误会了，知道 Flask 就先把 Flask 学好？&lt;br /&gt;我怕只学个 Flask 太过单薄，能说出未见过名词的人看起来像是在某个范围内学习一样，例如学习 Spring boot ，那么 xx 、zz 都是必须的，这些学完是入门，再学 yy 是进阶，这样&lt;br /&gt;&lt;br /&gt;求人生导师的降临</description><pubDate>Thu, 23 Nov 2023 15:10:58 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994667#reply1</guid></item><item><title>[程序员] 分享一个自己工作/学习的保持专注度的小 tips</title><link>https://www.v2ex.com/t/994666#reply3</link><description>浏览器装了番茄钟插件，每次定时 50 分钟。但是很多时候坚持不了 50 分钟，那就暂停番茄钟。觉得自己专注度又回来了，摸鱼结束的时候就按一下开始，继续番茄钟计时。&lt;br /&gt;&lt;br /&gt;这个小 tips 的核心就是用完成主义代替完美主义，不需要持续地保持高专注度，而是慢慢培养，慢慢提升。</description><pubDate>Thu, 23 Nov 2023 14:57:20 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994666#reply3</guid></item><item><title>[Apple] 问个 homekit 的问题，换新账号登录美区后， aqara 设备就无法导入 homekit 设备了，怎么解决</title><link>https://www.v2ex.com/t/994665#reply1</link><description>原来是 QQ 邮箱的国区，aqara 的全屋智能家电，在 APP 里一键导入 homekit&lt;br /&gt;&lt;br /&gt;现在换手机用 GMAIL 邮箱登录了美区，下载了 aqara 软件，从 APP 里一键导入 HOMEKIT 就失败了&lt;br /&gt;&lt;br /&gt;41 个设备全都显示未匹配到对应设备&lt;br /&gt;&lt;br /&gt;但是这些设备在 aqara 里能正常操作，求解&lt;br /&gt;&lt;br /&gt;国区的 14PM 已经初始化了，打算卖了，难道要再次登录到国区 HOMEKIT 界面里把所有设备全删掉&lt;br /&gt;&lt;br /&gt;才能用 aqara 导入么&lt;br /&gt;&lt;br /&gt;还有啥其他可行的方法&lt;br /&gt;&lt;br /&gt;还是要在 aqara 里全部删除，然后用 aqara 重新配对，再导入 homekit</description><pubDate>Thu, 23 Nov 2023 14:53:30 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994665#reply1</guid></item><item><title>[MacBook Pro] 求推个质量好速度快的外置 MBP 固态 移动硬盘 拯救下 8G+256G 丐版</title><link>https://www.v2ex.com/t/994663#reply4</link><description>如题，谢谢各位吴彦祖们,m1 芯片和 intel 芯片 mbp 各一个</description><pubDate>Thu, 23 Nov 2023 14:35:32 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994663#reply4</guid></item><item><title>[Apple] 2023 黑五有购买 apple gift card 礼品卡的吗？有推荐的安全的渠道吗</title><link>https://www.v2ex.com/t/994660#reply2</link><description>&lt;p&gt;2023 黑五有购买 apple 礼品卡的吗？有推荐的安全的渠道吗&lt;/p&gt;</description><pubDate>Thu, 23 Nov 2023 14:28:31 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994660#reply2</guid></item><item><title>[程序员] 终于祛除了这开机广告了</title><link>https://www.v2ex.com/t/994658#reply9</link><description>&lt;p&gt;电脑每次开机都会自动打开 chrome 浏览器跳转到广告页面，由于不是什么弹窗程序，用一些软件也抓不到是什么流氓程序，就这么忍受的一段时间。&lt;/p&gt;
&lt;p&gt;今天终于下定决心搞清楚到底是哪里出了问题，我的思维一直放在可能是什么服务，计划任务打开的浏览器，排查一圈之后无果，只好试着问问 ChatGPT ，问了几圈给推荐了 ProcessMonitor 这软件，试了一下果然有所发现&lt;/p&gt;
&lt;p&gt;&lt;img alt="ProcessMonitor" class="embedded_image" rel="noreferrer" src="https://i.imgur.com/QhHjIJB.png" /&gt; &lt;/p&gt;
&lt;p&gt;于是对这个域名百度了一下，果然中招的不在少数，然后在注册表里面找到了这么一行&lt;/p&gt;
&lt;p&gt;&lt;img alt="注册表" class="embedded_image" rel="noreferrer" src="https://i.imgur.com/Ionyb1H.png" /&gt; &lt;/p&gt;
&lt;p&gt;原来是通过这种方式打开的浏览器&lt;/p&gt;
&lt;p&gt;虽然删除就可以了，但我也找不到是哪个流氓软件设置进去的&lt;/p&gt;</description><pubDate>Thu, 23 Nov 2023 14:12:44 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994658#reply9</guid></item><item><title>[程序员] 你们写文档吗</title><link>https://www.v2ex.com/t/994657#reply6</link><description>我们组几乎没有文档，业务只存在于三位“元老”脑中。他们随便走一位，业务都得黄。&lt;br /&gt;&lt;br /&gt;  产品需求文档是有的，但是也不知道跟代码是怎么对应的，而且也不知道全不全。&lt;br /&gt;&lt;br /&gt;  之前在外包公司呆的时候，虽然那个时候还没用 git ，但是文件的每次改动都要将需求链接或者 bug 链接写在文件的注释里，后来者通过需求文件很容易理解业务全貌。现在基本只能靠跟“前辈”讨教或者自己读代码，犹如盲人摸象，只能获得一些残缺不全的业务认知。&lt;br /&gt;&lt;br /&gt;  不知道大家是怎么让新队友快速熟悉业务的？是通过文档吗？还是让 ta“自学成才”？如果是通过文档，那么是怎样保持文档的“新鲜度”的呢？</description><pubDate>Thu, 23 Nov 2023 14:07:17 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994657#reply6</guid></item><item><title>[问与答] [付费问答] 在写一个富文本编辑器，其中用到了带父子节点的双向链表，可无限嵌套，写了个递归一直报错，希望大佬指点指点，答案被采纳我 v 信转 120 给您（不在乎钱的也可以试一试，这十分考验算法实战能力）</title><link>https://www.v2ex.com/t/994656#reply3</link><description>&lt;p&gt;在写一个富文本编辑器，其中用到了带父子节点的双向链表，要把无顺序的节点树根据 prev_id ，next_id 处理成顺序的，而且有些节点是带 children 的，children 中的节点同其他节点，可无限嵌套，写了个递归一直报错，希望大佬指点指点，答案被采纳我 v 信转 120 给您（不在乎钱的也可以试一试，这十分考验算法实战能力）&lt;/p&gt;
&lt;p&gt;raw_nodes 数据：&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-ts"&gt;const raw_nodes = [
    {
        "type": "file",
        "name": "工作目录二",
        "icon": "",
        "id": "dgacbecjhzbcufq13_rvmr_gjz98xo",
        "module": "todo",
        "pid": "kzoxuadlnqrtxeg43xugw2s0voutnj",
        "prev_id": "pcwsejrnwzuwjpyve64ww68hxxt74r"
    },
    {
        "type": "file",
        "name": "日常",
        "icon": "",
        "id": "gpvwcojxffgijtw14xat7-ealc7w8l",
        "module": "todo",
        "pid": "",
        "prev_id": "kzoxuadlnqrtxeg43xugw2s0voutnj"
    },
    {
        "type": "dir",
        "name": "工作",
        "icon": "",
        "id": "kzoxuadlnqrtxeg43xugw2s0voutnj",
        "module": "todo",
        "pid": "",
        "next_id": "gpvwcojxffgijtw14xat7-ealc7w8l"
    },
    {
        "type": "file",
        "name": "工作目录一",
        "icon": "",
        "id": "pcwsejrnwzuwjpyve64ww68hxxt74r",
        "module": "todo",
        "pid": "kzoxuadlnqrtxeg43xugw2s0voutnj",
        "next_id": "kzoxuadlnqrtxeg43xugw2s0voutnj"
    }
]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;tree 数据和 tree_map 由下面 class 中的函数可计算出来：&lt;/p&gt;
&lt;p&gt;class 的一部分：&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-ts"&gt;import { get, flatMap, last, initial, cloneDeep, find } from 'lodash-es'

type RawNode = {
	id: string
	pid?: string
	prev_id?: string
	next_id?: string
	[key: string]: any
}

type RawNodes = Array&amp;lt;RawNode&amp;gt;
type TreeItem = RawNode &amp;amp; { children?: Tree }
type Tree = Array&amp;lt;TreeItem&amp;gt;
type TreeMap = Record&amp;lt;string, TreeItem&amp;gt;

export default class Index {
	tree = [] as Tree

	public init(raw_nodes: RawNodes) {
		const raw_tree_map = this.setRawMap(raw_nodes)
		const { tree, tree_map } = this.getTree(raw_nodes, raw_tree_map)

		console.log(tree)

		this.tree = this.sortTree(tree, tree_map)
	}

	private setRawMap(raw_nodes: RawNodes) {
		const tree_map = {} as TreeMap

		raw_nodes.map((item) =&amp;gt; {
			tree_map[item.id] = item
		})

		return tree_map
	}

	private getTree(raw_nodes: RawNodes, tree_map: TreeMap) {
		const tree = [] as Tree

		raw_nodes.forEach((item) =&amp;gt; {
			if (item.pid) {
				if (!tree_map[item.pid].children) {
					tree_map[item.pid].children = []
				}

				if (!tree_map[item.pid]?.children?.length) {
					tree_map[item.pid].children = [item]
				} else {
					tree_map[item.pid].children.push(item)
				}
			} else {
				tree.push(item)
			}
		})

		return { tree, tree_map }
	}

	private sortTree(tree: Tree, tree_map: TreeMap) {
		const target_tree = [] as Tree
		const start_node = find(tree, (item) =&amp;gt; !item.prev_id)

		if (!start_node) return []
		let current = start_node.id

		while (current) {
			const item = tree_map[current]

			if (item?.children?.length) {
                                // 这里报错（ RangeError: Maximum call stack size exceeded ）
				// item.children = this.sortTree(item.children, tree_map)
			}

			target_tree.push(item)

			current = item.next_id
		}

		return target_tree
	}

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;正确的情况应输出数据为：&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-ts"&gt;const tree = [
    {
        "type": "dir",
        "name": "工作",
        "icon": "",
        "id": "kzoxuadlnqrtxeg43xugw2s0voutnj",
        "module": "todo",
        "pid": "",
        "next_id": "gpvwcojxffgijtw14xat7-ealc7w8l",
        "children": [
             {
                "type": "file",
                "name": "工作目录一",
                "icon": "",
                "id": "pcwsejrnwzuwjpyve64ww68hxxt74r",
                "module": "todo",
                "pid": "kzoxuadlnqrtxeg43xugw2s0voutnj",
                "next_id": "kzoxuadlnqrtxeg43xugw2s0voutnj"
            },
            {
                "type": "file",
                "name": "工作目录二",
                "icon": "",
                "id": "dgacbecjhzbcufq13_rvmr_gjz98xo",
                "module": "todo",
                "pid": "kzoxuadlnqrtxeg43xugw2s0voutnj",
                "prev_id": "pcwsejrnwzuwjpyve64ww68hxxt74r"
            },
           
        ]
    },
      {
        "type": "file",
        "name": "日常",
        "icon": "",
        "id": "gpvwcojxffgijtw14xat7-ealc7w8l",
        "module": "todo",
        "pid": "",
        "prev_id": "kzoxuadlnqrtxeg43xugw2s0voutnj"
    },
]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;哪位大佬指点迷津，小弟 v 您 60+60 ，祝您 66 大顺！&lt;/p&gt;</description><pubDate>Thu, 23 Nov 2023 14:00:11 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994656#reply3</guid></item><item><title>[问与答] 去海外有什么成品 NAS 推荐？</title><link>https://www.v2ex.com/t/994655#reply1</link><description>目前在国内用的国产极空间 NAS ，感觉不用自己操心挺好的，马上要去美国 🇺🇸 做 postdoc 了，在海外的哥们儿有没有什么开箱即用的 NAS 推荐？先谢过了~</description><pubDate>Thu, 23 Nov 2023 13:54:01 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994655#reply1</guid></item><item><title>[问与答] tails 和 qubesOS 那个安全综合更强？</title><link>https://www.v2ex.com/t/994654#reply0</link><description></description><pubDate>Thu, 23 Nov 2023 13:50:27 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994654#reply0</guid></item><item><title>[Android] (类)原生在国内目前后台调教的最优解?</title><link>https://www.v2ex.com/t/994652#reply2</link><description></description><pubDate>Thu, 23 Nov 2023 13:39:19 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/994652#reply2</guid></item></channel></rss>